<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Car Shop</title>
    <link rel="stylesheet" href="index.css" />
</head>
<body>
<script type="module" src="index.js"></script>

<header>
    <div id="headerdiv" class="header-menu">
        <a href="/">
            <div class="header-title">Car Shop</div>
        </a>

                <div class="header-name" id="namediv"></div>

            <span id="btnLogout"
                    class="header-icon">
              <img src="/images/logout.svg" height="24" />
            </span>
        </span>
    </div>
</header>

<div id="testid" class="testclass">

</div>

<div id="logindiv" class="login">

    <div class="textfield">
        <label for="email">Email</label>
        <input class="email" type="text" id="email" required="required"/>
    </div>
    <div class="textfield">
        <label for="password">Password</label>
        <input class="password" type="password" id="password" required="required"/>
    </div>
    <div class="login-button" id="btnSignUp">Sign up</div>
    <div class="login-button" id="btnSignIn">Sign In</div>
</div>
<div class="page" id="contentdiv">

    <h1>Cars List</h1>
    <table id="carsTable">
        <thead>
        <tr>
            <th>ID</th>
            <th>model</th>
            <th>brand</th>
            <th>color</th>
            <th>year</th>
            <th>price</th>
            <th>description</th>
        </tr>
        </thead>
        <tbody>
        <!-- Orders will be inserted here dynamically -->
        </tbody>
    </table>

    <h1>Order List</h1>
    <table id="orderTable">
        <thead>
        <tr>
            <th>ID</th>
            <th>Customer email</th>
            <th>Items</th>
        </tr>
        </thead>
        <tbody>
        <!-- Orders will be inserted here dynamically -->
        </tbody>
    </table>
    <h1>Customers List</h1>
    <table id="customersTable">
        <thead>
        <tr>
            <th>ID</th>
            <th>name</th>
            <th>email</th>
        </tr>
        </thead>
        <tbody>
        <!-- Orders will be inserted here dynamically -->
        </tbody>
    </table>

    <div class="page" id="cardiv">
        <!-- Car List Section -->
        <h2>Available Cars</h2>
        <ul id="car-list"></ul>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        fetchCarList();

        function fetchCarList() {
            fetch('/api/broker/cars')
                .then(response => response.json())
                .then(cars => {
                    const carList = document.getElementById('car-list');
                    carList.innerHTML = ''; // Clear any existing content
                    cars.forEach(car => {
                        const li = document.createElement('li');
                        const a = document.createElement('a');
                        a.href = `/cars/${car.id}`;
                        a.textContent = `${car.brand} ${car.model}`;
                        li.appendChild(a);
                        carList.appendChild(li);
                    });
                })
                .catch(error => console.error('Error fetching cars:', error));
        }
    });
</script>

</body>
</html>